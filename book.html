<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Now | Hiraya Private Resort</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<header>
    <nav class="navbar">
        <div class="logo">
            <a href="index.html#Home">
                <img src="assets/hirayalogo3.png" alt="Hiraya Logo Icon">
                <img src="assets/hirayalogo4.png" alt="Hiraya Private Resort Text Logo" class="logo-text-img">
            </a>
        </div>
        <a href="javascript:void(0);" class="menu-toggle" aria-label="Toggle navigation menu">
            <i class="fas fa-bars"></i>
        </a>
        <div class="nav-links"> 
            <ul>
                <li><a href="index.html#Home">Home</a></li>
                <li><a href="index.html#Amenities">Amenities</a></li> 
                <li><a href="index.html#Rates">Rates</a></li>
                <li><a href="index.html#AvailabilityCalendar">Availability</a></li>
                <li><a href="index.html#ContactUs">Contact Us</a></li>
                <li><a href="index.html#Home" class="book-now-btn">Back to Home</a></li> 
            </ul>
        </div>
    </nav>
</header>

<section class="booking-section">
    <div id="booking-container" class="booking-content">
        <h1>Book Your Stay at Hiraya Private Resort</h1>
        <p>Please fill out the form below to submit your reservation inquiry. Our team will contact you within 24 hours to confirm availability and payment details.</p>

        <form id="booking-form" class="booking-form" 
              action="https://formspree.io/f/mqayepyd" 
              method="POST"> 

      ```
*Replace `YOUR_FORMSPREE_ENDPOINT_URL` with the URL Formspree gives you.*
            
            <div class="form-group">
                <label for="name">Full Name *</label>
                <input type="text" id="name" name="name" required placeholder="John B. Doe">
            </div>
            
            <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" required placeholder="name@example.com">
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input type="tel" id="phone" name="phone" required placeholder="+63 9xx xxx xxxx">
            </div>

            <div class="form-group">
                <label for="checkin-date">Check-in Date *</label>
                <input type="date" id="checkin-date" name="checkin-date" required>
            </div>
            
            <div class="form-group">
                <label for="checkout-date">Check-out Date * (For Day Use, use the same date)</label>
                <input type="date" id="checkout-date" name="checkout-date" required>
            </div>

            <div id="nights-display"></div>

            <div class="form-group">
                <label for="guests">Number of Guests (Max 20)</label>
                <input type="number" id="guests" name="guests" min="1" max="20" value="1" required>
            </div>

            <div class="form-group">
                <label for="message">Special Requests / Notes</label>
                <textarea id="message" name="message" rows="4" placeholder="E.g., Special occasion, early check-in request."></textarea>
            </div>
            
            <button type="submit" class="form-submit-btn">Submit Booking Inquiry</button>
        </form>
    </div>
    
    <div id="thank-you-message" class="booking-content" style="display: none;">
        <h1>Thank You! ðŸŽ‰</h1>
        <p>Your reservation inquiry has been successfully submitted. We appreciate your interest in Hiraya Private Resort!</p>
        <p>A member of our team will contact you at your provided email/phone number **within 24 hours** to confirm the booking details and proceed with the downpayment.</p>
        <p>For urgent inquiries, please call us at **+63 961 052 7905**.</p>
    </div>

    <a href="index.html#Home" class="return-home">Return to Home Page</a>
</section>

<script>
document.addEventListener("DOMContentLoaded", function() {
    // ------------------------------------------------------------------
    // 1. Mobile Menu Toggle Logic (Copied from index.html)
    // ------------------------------------------------------------------
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    if (menuToggle && navLinks) {
        menuToggle.addEventListener('click', function() {
            navLinks.classList.toggle('active');
        });

        // Close menu when a link is clicked
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (navLinks.classList.contains('active')) {
                    navLinks.classList.remove('active');
                }
            });
        });
    }

    // ------------------------------------------------------------------
    // 2. Night's Calculation Logic
    // ------------------------------------------------------------------
    const checkinInput = document.getElementById('checkin-date');
    const checkoutInput = document.getElementById('checkout-date');
    const nightsDisplay = document.getElementById('nights-display');

    function calculateNights() {
        const checkinDate = new Date(checkinInput.value);
        const checkoutDate = new Date(checkoutInput.value);

        // Check if both dates are valid
        if (checkinDate && checkoutDate && checkinDate.getTime() && checkoutDate.getTime()) {
            const timeDifference = checkoutDate.getTime() - checkinDate.getTime();
            const dayDifference = timeDifference / (1000 * 60 * 60 * 24);

            if (dayDifference < 0) {
                nightsDisplay.innerHTML = '<span style="color: red;">Check-out must be after Check-in!</span>';
                return;
            }
            
            if (dayDifference === 0) {
                nightsDisplay.textContent = 'Duration: Day Use (Same Day)';
            } else {
                // Use Math.ceil to ensure minimum 1 night for overnight
                nightsDisplay.textContent = `Duration: ${Math.ceil(dayDifference)} night(s)`;
            }
        } else {
            nightsDisplay.textContent = 'Please select both dates to calculate duration.';
        }
    }

    checkinInput.addEventListener('change', calculateNights);
    checkoutInput.addEventListener('change', calculateNights);

    // Initial check to populate the field on load if necessary (e.g., from query params)
    calculateNights(); 

    // ------------------------------------------------------------------
    // 3. Form Submission Handling (Simulated)
    // ------------------------------------------------------------------
    const form = document.getElementById('booking-form');
    const bookingContainer = document.getElementById('booking-container');
    const thankYouMessage = document.getElementById('thank-you-message');
    
    //form.addEventListener('submit', function(e) {
        // e.preventDefault();

        // 1. You would normally send the data to a server/email service here (e.g., Fetch API)
        // console.log('Form Submitted!', new FormData(form));

        // 2. Hide the form and show the thank you message
        bookingContainer.style.display = 'none';
        thankYouMessage.style.display = 'block';

        // 3. Smoothly scroll to the top of the booking area to show the thank you message clearly
        document.querySelector('.booking-section').scrollIntoView({ behavior: 'smooth' });

        // Optional: Clear the form fields (good practice)
        form.reset();
    });

    // ------------------------------------------------------------------
    // 4. Pre-filling Dates (Handling Query Parameters from index.html rates)
    // ------------------------------------------------------------------
    const urlParams = new URLSearchParams(window.location.search);
    const bookingType = urlParams.get('type');

    if (bookingType === 'dayuse') {
        const today = new Date().toISOString().split('T')[0];
        checkinInput.value = today;
        checkoutInput.value = today;
        calculateNights();
    } 
    // For 'overnight', we don't pre-fill; we let the user choose.
    // However, we should still enforce that check-in cannot be in the past.

    // Set minimum date for check-in to today
    const today = new Date();
    // Format YYYY-MM-DD
    const minDate = today.getFullYear() + '-' + 
                    ('0' + (today.getMonth() + 1)).slice(-2) + '-' + 
                    ('0' + today.getDate()).slice(-2);
                    
    checkinInput.setAttribute('min', minDate);
    checkoutInput.setAttribute('min', minDate);
});
</script>
</body>
</html>
