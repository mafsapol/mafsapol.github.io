<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Page</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
    <nav class="navbar">
        <div class="logo">
            <a href="#Home">
                <img src="hirayalogo3.jpg" alt="Hiraya Logo">
                <img src="hirayalogo4.png" alt="Hiraya Private Resort Text Logo" class="logo-text-img"> </a>
        </div>
        <ul>
            <li><a href="#Home">Home</a></li>
            <li><a href="book.html">Rates</a></li>
            <li><a href="#Amenities">Amenities</a></li>
            <li><a href="#ContactUs">Contact Us</a></li>
            <li><a href="book.html" class="book-now-btn">Book Now</a></li>
        </ul>
    </nav>
    </header>

    <section class="booking-section">
        <div class="booking-content" id="booking-form-container">
            <h1 id="booking-title">Book Your Stay</h1>
            <p id="booking-intro">Please fill out the form below to request your booking. After submission, you will receive instructions on how to send your downpayment. Upload your proof of payment, and we will manually confirm your reservation.</p>

            <form class="booking-form" id="bookingForm" action="#" method="POST" enctype="multipart/form-data">
                <input type="hidden" id="bookingType" name="bookingType" value="">

                <div class="form-group">
                    <label for="fullName">Full Name:</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" placeholder="e.g., +639123456789" required>
                </div>

                <div class="form-group">
                    <label for="checkInDate">Check-in Date:</label>
                    <input type="date" id="checkInDate" name="checkInDate" required>
                </div>

                <div class="form-group">
                    <label for="checkOutDate">Check-out Date:</label>
                    <input type="date" id="checkOutDate" name="checkOutDate" required>
                </div>

                <div id="nights-display"></div>

                <div class="form-group">
                    <label for="guests">Number of Guests:</label>
                    <input type="number" id="guests" name="guests" min="1" value="1" required>
                </div>

                <div class="form-group">
                    <label for="message">Additional Notes (Optional):</label>
                    <textarea id="message" name="message" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label for="downpaymentProof">Upload Downpayment Proof (Image):</label>
                    <input type="file" id="downpaymentProof" name="downpaymentProof" accept="image/*" required>
                </div>

                <button type="submit" class="form-submit-btn">Submit Booking Request</button>
            </form>
        </div>

        <div class="booking-content" id="thank-you-message" style="display: none;">
            <h1>Thank You for Your Booking Request!</h1>
            <p>Your booking request has been submitted. We will review your provided downpayment proof and contact you shortly to confirm your reservation and provide further details.</p>
            <p>Please allow 24-48 hours for confirmation.</p>
        </div>
        
        <a href="index.html" class="return-home">Return Home</a>
    </section>

    <script>
        const checkInDateInput = document.getElementById('checkInDate');
        const checkOutDateInput = document.getElementById('checkOutDate');
        const nightsDisplay = document.getElementById('nights-display');
        const bookingForm = document.getElementById('bookingForm');
        const bookingFormContainer = document.getElementById('booking-form-container');
        const thankYouMessage = document.getElementById('thank-you-message');
        const bookingTitle = document.getElementById('booking-title'); // NEW
        const bookingIntro = document.getElementById('booking-intro'); // NEW
        const bookingTypeInput = document.getElementById('bookingType'); // NEW

        function calculateNights() {
            const checkInDate = new Date(checkInDateInput.value);
            const checkOutDate = new Date(checkOutDateInput.value);

            // Set times to midnight to ensure accurate day calculation
            checkInDate.setHours(0, 0, 0, 0);
            checkOutDate.setHours(0, 0, 0, 0);

            if (checkInDate && checkOutDate && checkOutDate > checkInDate) {
                const diffTime = Math.abs(checkOutDate - checkInDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                nightsDisplay.textContent = `Duration: ${diffDays} night(s)`;
            } else if (checkInDate && checkOutDate && checkInDate >= checkOutDate) {
                nightsDisplay.textContent = "Check-out date must be after check-in date.";
            } else {
                nightsDisplay.textContent = "";
            }
        }

        // Add event listeners
        checkInDateInput.addEventListener('change', calculateNights);
        checkOutDateInput.addEventListener('change', calculateNights);

        // Optional: Set minimum date for check-in to today
        const today = new Date();
        const todayFormatted = today.getFullYear() + '-' +
                              String(today.getMonth() + 1).padStart(2, '0') + '-' +
                              String(today.getDate()).padStart(2, '0');
        checkInDateInput.min = todayFormatted;

        // Optional: Ensure check-out date is not before check-in date dynamically
        checkInDateInput.addEventListener('change', () => {
            checkOutDateInput.min = checkInDateInput.value;
            // If check-out is before new check-in, reset it
            if (checkOutDateInput.value && checkOutDateInput.value < checkInDateInput.value) {
                checkOutDateInput.value = '';
            }
            calculateNights(); // Recalculate if check-in changes
        });

        // Handle form submission for client-side display
        bookingForm.addEventListener('submit', function(event) {
            event.preventDefault();

            // For now, only hide the form and show the message immediately
            // This is ONLY for visual feedback on a static site.
            bookingFormContainer.style.display = 'none';
            thankYouMessage.style.display = 'block';
        });

        // NEW: Logic to customize booking page based on URL parameter
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const bookingType = urlParams.get('type'); // 'dayuse' or 'overnight'

            if (bookingType === 'dayuse') {
                bookingTitle.textContent = 'Book Your Day Use Package';
                bookingIntro.textContent = 'You are booking a Day Use Package. Please fill out the form below. After submission, you will receive instructions on how to send your downpayment.';
                bookingTypeInput.value = 'Day Use';
                // Optionally hide/show fields specific to day-use vs. overnight
                // E.g., if day-use doesn't need check-out date:
                // document.getElementById('checkOutDate').parentElement.style.display = 'none';
                // nightsDisplay.style.display = 'none';
            } else if (bookingType === 'overnight') {
                bookingTitle.textContent = 'Book Your Overnight Stay';
                bookingIntro.textContent = 'You are booking an Overnight Stay. Please fill out the form below. After submission, you will receive instructions on how to send your downpayment.';
                bookingTypeInput.value = 'Overnight';
            } else {
                // Default case if no type is specified (e.g., direct access to book.html)
                bookingTitle.textContent = 'Book Your Stay';
                bookingIntro.textContent = 'Please fill out the form below to request your booking. After submission, you will receive instructions on how to send your downpayment. Upload your proof of payment, and we will manually confirm your reservation.';
                bookingTypeInput.value = 'General';
            }
        });

        // Initialize calculation on page load if dates are pre-filled (unlikely for empty form)
        calculateNights();
    </script>
</body>
</html>